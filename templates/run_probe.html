{% extends "base.html" %}
{% block content %}
<div class="row g-4">
  <div class="col-lg-6">
    <div class="card card-glass">
      <div class="card-body">
        <h3 class="card-title mb-3 text-light">Configure a Probe Run</h3>
        <form method="post" onsubmit="showLoadingOverlay()">
          <div class="mb-3">
            <label class="form-label text-light">Model</label>
            <select class="form-select" name="model_name">
              {% for m in models %}
              <option value="{{ m }}">{{ m }}</option>
              {% endfor %}
            </select>
          </div>

          <div class="mb-3">
            <label class="form-label text-light">Task</label>
            <select class="form-select" name="task_name">
              {% for key, label in tasks.items() %}
              <option value="{{ key }}">{{ label }}</option>
              {% endfor %}
            </select>
          </div>

          <div class="mb-3">
            <label class="form-label text-light">Max samples</label>
            <input type="number" name="max_samples" class="form-control" value="500" min="100" max="2000">
            <div class="form-text">Higher = slower but smoother curves.</div>
          </div>

          <div class="mb-3">
            <label class="form-label text-light">Max sequence length</label>
            <input type="number" name="max_length" class="form-control" value="64" min="32" max="256">
          </div>

          <button type="submit" class="btn btn-primary w-100 btn-lg shadow-glow">
            ðŸš€ Launch Probing Run
          </button>
        </form>
      </div>
    </div>
  </div>

  <div class="col-lg-6">
    <div class="card card-glass h-100">
      <div class="card-body">
        <h4 class="card-title text-light mb-3">What happens under the hood?</h4>
        <ol class="text-muted small">
          <li>Download & cache the dataset via Kaggle API.</li>
          <li>Sample up to N examples and split into train/test.</li>
          <li>Extract <strong>hidden states from every transformer layer</strong>.</li>
          <li>Train a lightweight logistic regression probe per layer.</li>
          <li>Compute <em>Accuracy</em>, <em>Weighted F1</em>, and <em>ECE</em>.</li>
          <li>Render heatmaps and line charts over model depth.</li>
        </ol>
        <p class="text-muted small">
          Youâ€™ll see which layers are best for <em>structure, emotion, and credibility</em>
          â€” exactly matching your IR proposal.
        </p>
      </div>
    </div>
  </div>
</div>
{% endblock %}
